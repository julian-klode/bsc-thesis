\section{First class generic functions}

A generic function is a first class function if it can be passed to another
generic function. This requires support for universal and existential types in the programming
language.

\subsection{LIGD}

Consider a generic function that can be applied to all representable values
and returns a string. For example, a function \cd{gshow} that shows values.
In Haskell, such a function would have the type:
\begin{lstlisting}[language=Haskell]
gshow :: forall a. Rep a -> a -> String
\end{lstlisting}

Using the encoding of universal types shown in section~\ref{universal-types},
we can encode our gshow function as an object with an apply method:
\lstinputlisting[firstline=248,lastline=264,label=src:ligd:Returning,caption=gshow in LIGD]{scala/src/ligd.scala}
We can now define another function accepting generic functions, for example, \cd{gmapQ}:
\lstinputlisting[firstline=273,lastline=279,label=src:ligd:Returning,caption=gshow in LIGD]{scala/src/ligd.scala}

Note that if we encode the function as a class and an object extending that
class as shown in section~\ref{lidg-extensible}, we can even extend the
function with new special cases. As such, this encoding offers much more
flexibility compared to the function encoding, and there's not much reason
to use functions.

\subsection{EMGM}
\todo{Add EMGM}

\subsection{Uniplate}
It is possible to encode all sorts of functions using a similar encoding
as used in LIGD to make them first class objects. Then it is possible to write
higher order functions that can apply them. Because \cd{Biplate} objects only offer
a limited a view at objects, though, this does not seem very worthwhile. For
example, we cannot write a \cd{gmapQ} like in the other tested libraries, because
\cd{Biplate} objects only look at one type of `element' within a containing
type.

In addition, we could not even write something like \cd{gshow} in Uniplate,
because there's no way to look at all arguments of a constructor.


\subsection{Shapeless}
\todo{Add shapeless, seems horrible}
